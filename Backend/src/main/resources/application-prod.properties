spring.application.name=backend
server.port=${PORT:8080}

# ==================== Database ====================
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/studentnotes}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD:password}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA optimization for Supabase PostgreSQL (Disable schema update in prod to avoid locks, use Flyway if possible, but update is okay for simple apps)
# Supabase uses standard PostgreSQL - no cold starts, always-on compute at the free tier
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.open-in-view=false

# ==================== Performance ====================
# Enable GZIP encoding for Note content transfer
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# Caching (Simple in-memory cache for Tree and Dashboard)
spring.cache.type=simple

# ==================== Security ====================
# JWT Configuration
app.jwt.secret=${JWT_SECRET}
app.jwt.expiration-ms=86400000

# CORS (Allow Frontend)
management.endpoints.web.exposure.include=health,info,metrics

# ==================== Logging ====================
logging.level.root=INFO
logging.level.com.studentnotes=INFO
# JSON logging for Render (Recommended)
logging.pattern.console={"timestamp":"%d{yyyy-MM-dd HH:mm:ss.SSS}","level":"%level","logger":"%logger{36}","message":"%msg"}%n
